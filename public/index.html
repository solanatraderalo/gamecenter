<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Подключение кошелька Solana</title>
    <script src="https://unpkg.com/@solana/web3.js@1.91.1/lib/index.iife.min.js"></script>
    <style>
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
        }
        .modal {
            background: #11141e;
            padding: 20px;
            border-radius: 10px;
            color: white;
            width: 200px;
            text-align: center;
        }
        .wallet-option {
            padding: 10px;
            margin: 5px 0;
            background: #1a1f2e;
            cursor: pointer;
        }
        .wallet-option:hover {
            background: #2d3345;
        }
    </style>
</head>
<body>
    <button id="connectButton">Подключить кошелёк</button>
    <div id="status"></div>

    <script>
        const wallets = [
            { name: "Phantom", check: () => window.solana?.isPhantom, connect: () => window.solana },
            { name: "Solflare", check: () => window.solflare?.isSolflare, connect: () => window.solflare }
        ];

        function showModal() {
            const overlay = document.createElement("div");
            overlay.className = "modal-overlay";
            const modal = document.createElement("div");
            modal.className = "modal";
            modal.innerHTML = "<h3>Выбери кошелёк</h3>";

            wallets.forEach(wallet => {
                const option = document.createElement("div");
                option.className = "wallet-option";
                option.textContent = wallet.name;
                option.onclick = () => connectWallet(wallet);
                modal.appendChild(option);
            });

            overlay.appendChild(modal);
            document.body.appendChild(overlay);
            overlay.style.display = "flex";

            overlay.onclick = (e) => {
                if (e.target === overlay) overlay.remove();
            };
        }

        async function connectWallet(wallet) {
            const status = document.getElementById("status");
            if (wallet.check()) {
                const provider = wallet.connect();
                try {
                    await provider.connect();
                    status.textContent = `Подключён ${wallet.name}: ${provider.publicKey.toString()}`;
                } catch (e) {
                    status.textContent = `Ошибка подключения ${wallet.name}: ${e.message}`;
                }
            } else {
                status.textContent = `${wallet.name} не найден. Установи его!`;
            }
            document.querySelector(".modal-overlay").remove();
        }

        document.getElementById("connectButton").onclick = showModal;
    </script>
</body>
</html>
